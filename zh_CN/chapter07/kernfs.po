msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: lfs-dev@lists.linuxfromscratch.org\n"
"POT-Creation-Date: 2022-09-21 17:47+0800\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"X-Pootle-Revision: 9999999\n"
"X-Pootle-Path: /zh_CN/lfs/chapter07/kernfs.po\n"
"X-Generator: Translate Toolkit 2.2.5\n"

#. type: Content of: <sect1><title>
#: lfs-en/chapter07/kernfs.xml
msgid "Preparing Virtual Kernel File Systems"
msgstr "准备虚拟内核文件系统"

#. type: Content of: <sect1><indexterm><primary>
#: lfs-en/chapter07/kernfs.xml
msgid "/dev/*"
msgstr "/dev/*"

#. type: Content of: <sect1><para>
#: lfs-en/chapter07/kernfs.xml
msgid ""
"Various file systems exported by the kernel are used to communicate to and "
"from the kernel itself. These file systems are virtual in that no disk space "
"is used for them. The content of the file systems resides in memory."
msgstr ""
"内核对外提供了一些文件系统，以便自己和用户空间进行通信。它们是虚拟文件系统，"
"并不占用磁盘空间，其内容保留在内存中。"

#. type: Content of: <sect1><para>
#: lfs-en/chapter07/kernfs.xml
msgid ""
"Begin by creating directories onto which the file systems will be mounted:"
msgstr "首先创建这些文件系统的挂载点："

#. type: Content of: <sect1><screen>
#: lfs-en/chapter07/kernfs.xml
#, no-wrap
msgid "<userinput>mkdir -pv $LFS/{dev,proc,sys,run}</userinput>"
msgstr "<userinput>mkdir -pv $LFS/{dev,proc,sys,run}</userinput>"

#. type: Content of: <sect1><sect2><title>
#: lfs-en/chapter07/kernfs.xml
msgid "Mounting and Populating /dev"
msgstr "挂载和填充 /dev"

#. type: Content of: <sect1><sect2><para>
#: lfs-en/chapter07/kernfs.xml
msgid ""
"During a normal boot, the kernel automatically mounts the <systemitem class="
"\"filesystem\">devtmpfs</systemitem> filesystem on the <filename class="
"\"directory\">/dev</filename> directory, and allow the devices to be created "
"dynamically on that virtual filesystem as they are detected or accessed. "
"Device creation is generally done during the boot process by the kernel and "
"Udev.  Since this new system does not yet have Udev and has not yet been "
"booted, it is necessary to mount and populate <filename class=\"directory\">/"
"dev</filename> manually. This is accomplished by bind mounting the host "
"system's <filename class=\"directory\">/dev</filename> directory. A bind "
"mount is a special type of mount that allows you to create a mirror of a "
"directory or mount point to some other location. Use the following command "
"to achieve this:"
msgstr ""
"在正常的引导过程中，内核自动挂载 <systemitem class=\"filesystem\">devtmpfs</"
"systemitem> 到 <filename class=\"directory\">/dev</filename>，并允许在设备被"
"发现或访问时动态地创建设备节点。设备节点通常由内核和 Udev 在系统引导时创建。"
"然而，我们的新系统还没有 Udev，也没有经过引导过程，因此必须手工挂载和填充 "
"<filename class=\"directory\">/dev</filename>。这可以通过绑定挂载宿主系统的 "
"<filename class=\"directory\">/dev</filename> 目录来实现。绑定挂载是一种特殊"
"挂载类型，它允许在另外的位置创建某个目录或挂载点的映像。运行以下命令进行绑定"
"挂载："

#. type: Content of: <sect1><sect2><screen>
#: lfs-en/chapter07/kernfs.xml
#, no-wrap
msgid "<userinput>mount -v --bind /dev $LFS/dev</userinput>"
msgstr "<userinput>mount -v --bind /dev $LFS/dev</userinput>"

#. type: Content of: <sect1><sect2><title>
#: lfs-en/chapter07/kernfs.xml
msgid "Mounting Virtual Kernel File Systems"
msgstr "挂载虚拟内核文件系统"

#. type: Content of: <sect1><sect2><para>
#: lfs-en/chapter07/kernfs.xml
msgid "Now mount the remaining virtual kernel filesystems:"
msgstr "现在挂载其余的虚拟内核文件系统："

#. type: Content of: <sect1><sect2><screen>
#: lfs-en/chapter07/kernfs.xml
#, no-wrap
msgid ""
"<userinput>mount -v --bind /dev/pts $LFS/dev/pts\n"
"mount -vt proc proc $LFS/proc\n"
"mount -vt sysfs sysfs $LFS/sys\n"
"mount -vt tmpfs tmpfs $LFS/run</userinput>"
msgstr ""
"<userinput>mount -v --bind /dev/pts $LFS/dev/pts\n"
"mount -vt proc proc $LFS/proc\n"
"mount -vt sysfs sysfs $LFS/sys\n"
"mount -vt tmpfs tmpfs $LFS/run</userinput>"

#. type: Content of: <sect1><sect2><para>
#: lfs-en/chapter07/kernfs.xml
msgid ""
"In some host systems, <filename>/dev/shm</filename> is a symbolic link to "
"<filename class=\"directory\">/run/shm</filename>.  The /run tmpfs was "
"mounted above so in this case only a directory needs to be created."
msgstr ""
"在某些宿主系统上，<filename>/dev/shm</filename> 是一个指向 <filename class="
"\"directory\">/run/shm</filename> 的符号链接。我们已经在 /run 下挂载了 tmpfs "
"文件系统，因此在这里只需要创建一个目录。"

#. type: Content of: <sect1><sect2><para>
#: lfs-en/chapter07/kernfs.xml
msgid ""
"In other cases <filename>/dev/shm</filename> is a mountpoint for a tmpfs. In "
"that case the mount of /dev above will only create /dev/shm in the chroot "
"environment as a directory. In this situation we explicitly mount a tmpfs,"
msgstr ""
"在其他宿主系统上，<filename>/dev/shm</filename> 是一个 tmpfs 的挂载点。此时，"
"绑定挂载 /dev 只会在 chroot 环境中生成 /dev/shm 目录。因此，需要显式挂载一个 "
"tmpfs："

#. type: Content of: <sect1><sect2><screen>
#: lfs-en/chapter07/kernfs.xml
#, no-wrap
msgid ""
"<userinput>if [ -h $LFS/dev/shm ]; then\n"
"  mkdir -pv $LFS/$(readlink $LFS/dev/shm)\n"
"else\n"
"  mount -t tmpfs -o nosuid,nodev tmpfs $LFS/dev/shm\n"
"fi</userinput>"
msgstr ""
"<userinput>if [ -h $LFS/dev/shm ]; then\n"
"  mkdir -pv $LFS/$(readlink $LFS/dev/shm)\n"
"else\n"
"  mount -t tmpfs -o nosuid,nodev tmpfs $LFS/dev/shm\n"
"fi</userinput>"
